{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "node -e \"const major = Number(process.versions.node.split('.')[0] || 0); if (major < 22) { console.error('Node 22+ is required for OpenCawt builds.'); process.exit(1); }\" && npm run build"
  },
  "deploy": {
    "startCommand": "node --disable-warning=DEP0040 --import tsx server/entrypoint.ts",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3
  }
}
